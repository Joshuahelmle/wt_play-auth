(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78da75e4"],{"16c0":function(e,t,o){},"568f":function(e,t,o){"use strict";o("c457")},"7d36":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"game"},[o("buttongroup",{on:{"handle-click":e.handle}}),"none"===e.playerWon?o("board",{attrs:{message:e.msg},on:{"col-clicked":e.play,"update-done":e.updated,"player-won":e.winstate}}):e._e(),"none"!==e.playerWon?o("div",[e._v("Congrats you have won: "+e._s(e.playerWon))]):e._e()],1)},s=[],l=(o("99af"),o("2ca0"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"board"},e._l(e.cells,(function(t){return o("div",{key:t.id,staticClass:"boardrow"},e._l(t,(function(t){return o("cell",{key:"row-"+t.row+"-col-"+t.col,attrs:{row:t.row,col:t.col,id:"row-"+t.row+"-col-"+t.col,needsScale:t.needsScale,color:t.color,needsPrev:t.needsPrev},on:{"cell-clicked":e.clicked,"cell-zoomed-out":e.zoomOut,"cell-zoomed-in":e.zoomIn}})})),1)})),0)])}),c=[],a=(o("4160"),o("fb6a"),o("b0c0"),o("a9e3"),o("159b"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"cell",class:{unset:!e.set,red:"red"===e.color,yellow:"yellow"===e.color,scaled:e.needsScale,preview:e.needsPrev},on:{click:e.setCell,mouseenter:e.zoomIn,mouseleave:e.zoomOut}})}),r=[],i={name:"Cell",props:{row:Number,col:Number,color:String,set:Boolean,needsScale:Boolean,needsPrev:Boolean},methods:{zoomIn:function(){this.$emit("cell-zoomed-in",this.col)},zoomOut:function(){this.$emit("cell-zoomed-out",this.col)},setCell:function(){this.$emit("cell-clicked",this.col)},setCol:function(e){this.color=e},test:function(){console.log("pressed")}}},d=i,u=o("2877"),h=Object(u["a"])(d,a,r,!1,null,null,null),m=h.exports,g=o("bc3a"),f=o.n(g),p={components:{Cell:m},name:"Board",props:{message:String},watch:{message:function(){this.message,this.update()}},data:function(){return{json:JSON,rows:Number,cols:Number,cells:[]}},computed:{data:function(){return{rows:0,cols:0,cells:[]}}},methods:{zoomIn:function(e){var t=this.findIdx(e);console.log(t);for(var o=0;o<this.cells.length;o++){var n=this.cells[o].slice(0);n[e].needsScale=!0,o===t&&(n[e].color=this.json.players[this.json.currentPlayerIndex].color.color,n[e].needsPrev=!0),this.$set(this.cells,o,n)}},zoomOut:function(e){for(var t=this.findIdx(e),o=0;o<this.cells.length;o++){var n=this.cells[o].slice(0);n[e].needsScale=!1,o===t&&(n[e].color="",n[e].needsPrev=!1),this.$set(this.cells,o,n)}},clicked:function(e){this.$emit("col-clicked",e)},findIdx:function(e){for(var t=0,o=0;o<this.cells.length;o++){if(this.cells[o][e].cell.isSet)break;t++}return t-1},update:function(){var e=this,t=!1,o="wt-connect4.herokuapp.com",n="http://".concat(t?"localhost:9000":o);f.a.get("".concat(n,"/games/0/json")).then((function(t){console.log(t.data.players[t.data.currentPlayerIndex].name),"PlayerWinState"===t.data.state&&e.$emit("player-won",t.data.players[t.data.currentPlayerIndex].name),e.json=t.data,e.rows=t.data.board.row,e.cols=t.data.board.col,e.cells=[];for(var o=0;o<e.rows;o++)e.cells.push([]),e.cells[o].push(new Array(e.cols));e.json.board.cells.forEach((function(t){t.color=t.cell.color.color,e.cells[t.row][t.col]=t}));for(var n=0;n<e.cells.length;n++){var s=e.cells[n].slice(0);e.$set(e.cells,n,s)}e.$emit("update-done"),console.log(e.cells)}))}},mounted:function(){this.update()}},b=p,v=(o("b2e8"),Object(u["a"])(b,l,c,!1,null,null,null)),w=v.exports,k=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-btn-toggle",{staticClass:"d-flex",attrs:{rounded:""}},e._l(this.buttons,(function(t){return o("v-btn",{key:t.id,staticClass:"flex-grow-1",attrs:{id:t.id,color:"primary"},on:{click:function(){return e.handle(t.id)}}},[e._v(" "+e._s(t.text)+" ")])})),1)},_=[],y={name:"ButtonGroup",data:function(){return{buttons:[{text:"Restart Game",id:"btn_restart"},{text:"Quit Game",id:"btn_quit"},{text:"Save Game",id:"btn_save"},{text:"Undo",id:"btn_undo"},{text:"Redo",id:"btn_redo"}]}},methods:{handle:function(e){switch(e){case"btn_restart":this.$emit("handle-click","restart");break;case"btn_quit":this.$emit("handle-click","quit");break;case"btn_save":this.$emit("handle-click","save");break;case"btn_undo":this.$emit("handle-click","undo");break;case"btn_redo":this.$emit("handle-click","redo");break}}}},S=y,C=o("6544"),O=o.n(C),E=o("8336"),x=o("5530"),$=(o("7e58"),o("604c")),j=$["a"].extend({name:"button-group",provide:function(){return{btnToggle:this}},computed:{classes:function(){return $["a"].options.computed.classes.call(this)}},methods:{genData:$["a"].options.methods.genData}}),B=o("a9ad"),I=o("58df"),R=Object(I["a"])(j,B["a"]).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes:function(){return Object(x["a"])(Object(x["a"])({},j.options.computed.classes.call(this)),{},{"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile},this.themeClasses)}},methods:{genData:function(){var e=this.setTextColor(this.color,Object(x["a"])({},j.options.methods.genData.call(this)));return this.group?e:this.setBackgroundColor(this.backgroundColor,e)}}}),T=Object(u["a"])(S,k,_,!1,null,null,null),z=T.exports;O()(T,{VBtn:E["a"],VBtnToggle:R});var P={name:"Game",components:{Buttongroup:z,Board:w},data:function(){return{LOCAL:!1,SERVER:"wt-connect4.herokuapp.com",SERVER_URL:"http://".concat(LOCAL?"localhost:9000":SERVER),ID:0,SOCKET:WebSocket,board:w,msg:"",playerWon:"none"}},mounted:function(){var e=document.cookie;e.startsWith("authenticator=")||this.$router.push("login")},created:function(){this.load(),console.log(this.playerWon)},methods:{load:function(){var e=this;console.log(this.ID),this.SOCKET=new WebSocket("ws://".concat(this.LOCAL?"localhost:9000":this.SERVER,"/games/").concat(this.ID,"/websocket")),this.SOCKET.onopen=function(){},this.SOCKET.onmessage=function(t){console.log(t),"string"===typeof t.data&&"done"===t.data&&(e.msg=t.data),"string"===typeof t.data&&"quitGame"===t.data&&(e.SOCKET.close(),location.href="/games")},this.SOCKET.onerror=function(e){return console.log(e)},this.SOCKET.onclose=function(){return console.log("Websocket closed!")},console.log(this.SOCKET)},play:function(e){console.log(e);var t={_type:"playTurn",_msg:"",_col:e};this.SOCKET.send(JSON.stringify(t))},handle:function(e){var t={_type:e,_msg:""};this.SOCKET.send(JSON.stringify(t))},getJSON:function(){var e=this;f.a.get("http://".concat(this.SERVER_URL,"/games/").concat(this.ID,"/json")).then((function(t){e.board.json=t.data}))},updated:function(){this.msg=""},winstate:function(e){console.log("Player won: ".concat(e)),this.playerWon=e}}},W=P,K=(o("568f"),Object(u["a"])(W,n,s,!1,null,null,null));t["default"]=K.exports},"7e58":function(e,t,o){},b2e8:function(e,t,o){"use strict";o("16c0")},c457:function(e,t,o){}}]);
//# sourceMappingURL=chunk-78da75e4.ee153a40.js.map